<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>実践入門 Ember.js</title>
    <link rel="stylesheet" href="style.css">
    <script src="libs/jquery-2.1.3.min.js"></script>
    <script src="libs/handlebars-v2.0.0.js"></script>
    <script src="libs/ember.js"></script>
    <script src="app.js"></script>
  </head>
  <body>

<script type="text/x-handlebars">
  <header>
    {{link-to "商品一覧" "products"}}
    {{link-to "カート" "cart"}}
  </header>

  <main>
    {{outlet}}
  </main>
</script>

<script type="text/x-handlebars" data-template-name="products/index">
  <h1>注目の商品</h1>

  <ul>
    {{#each product in model}}
      <li>{{link-to product.name "products.show" product}}</li>
    {{/each}}
  </ul>
</script>

<script type="text/x-handlebars" data-template-name="products/show">
  <h2>{{model.name}}</h2>

  <a target="_blank" {{bind-attr href=model.url}}>詳しく見る</a>

  ${{model.price}} USD
  <button {{action "addCart" model}} >カートに入れる</button>
</script>

<script type="text/x-handlebars" data-template-name="cart">
  <h1>注文確認</h1>

  {{uniqProductCount}}種類 {{model.length}}個の商品がカートに入っています。
  合計金額 ${{totalPrice}} USD

  <ul>
    {{#each product in model}}
      <li>{{product.name}}: ${{product.price}} USD</li>
    {{/each}}
  </ul>
</script>

  </body>
</html>
